<html>
<body>
	<script>
          function fireWebHook(id) {
    // Construct the URL with the passed ID
    const url = `https://hook.eu2.make.com/uxdfah66e520o1xm4qvo6nd67tand2hs?id=${id}`;
    //console.log("URL:", url);
    //console.log("Activating webhook with ID:", id);

    // Fetch the webhook URL
    fetch(url)
        .then(response => response.text())  // Extract response body as plain text
        .then(data => {
            //console.log('Response body:', data);  // Log the actual response body

            // Check if the response is a valid ID (contains only lowercase letters and numbers)
            if (/^[a-z0-9]+$/.test(data)) {
                //console.log('New ID:', data);

                // Recursively call fireWebHook with the new ID
                fireWebHook(data);
            } else {
                console.log('No new ID or invalid response:', data);
            }
        })
        .catch(error => {
            console.error('Error:', error.message);  // Simplified error handling
        });
	}
	</script>

	 <style>
          .container {
            height: 40px;
            position: relative;
          }
          
          .center {
            margin: 0;
            position: absolute;
            top: 50%;
            left: 50%;
            -ms-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
          }
     </style>

<div class="container">
  <div class="center">
	  <button class="boto-generar" onclick="fireWebHook('27ce4dfb5f5543e8bcaad63dd3ea1d8b')">Disparar WebHooks</button>
  </div>
</div>
    
</body>
</html>
